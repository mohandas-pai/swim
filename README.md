# SWIM - A Simulator of Web Infrastructure and Management
SWIM is a self-adaptive exemplar that simulates a web application. SWIM can be used as a target system with an external adaptation manager interacting with it through its TCP-based interface or with an adaptation manager built as a simulation module.

## Installation - Install Docker
SWIM uses Docker containers to automate deployment of the simulation into a virtual container. Docker is available for free at http://docker.com. Docker must be installed in your environment. The community edition is sufficient for running SWIM, which can be downloaded from [here](https://www.docker.com/community-edition#/download). SWIM itself is hosted on Docker Hub.

## Creating and connecting to a container
As mentioned, SWIM is hosted on Docker Hub, and online repository for Docker containers. The first time docker is run, containers will be downloaded onto your host machine (multiple downloads will occur because containers are layered on each other, and SWIM is built on a number of Linux containers for windowing, simulation, etc.). This can be done with the following command run in a terminal or command prompt:
```
   > docker run -d -p 5901:5901 -p 6901:6901 --name swim gabrielmoreno/swim
```
When all images have `Pull complete` and the final message is printed, the SWIM container is now installed on your system.

**Note:** Don't do this now, but when you are done using the container, you can stop the container using ``docker stop swim``, and to start it again you can do ``docker start swim``.

### Connecting to SWIM
The container opens two ports on your host (5901 and 6901) that are mapped to the same ports in the container. These ports allow two modes of connection with SWIM - via HTTP or via a VNC client.

If you have a VNC client installed, you can connect through it to the host: `vnc://localhost:5901`, and using the password `vncpassword`. To connect with HTTP, open a HTML5 compatible browser, and open the address http://localhost:6901 This will also prompt you for the password (which is the same as above). 

## Running SWIM
1) Clone the GitHub repository into a new folder within the VNC interface.
```
> git clone https://github.com/mohandas-pai/swim.git
```
2) Copy the src folder from the cloned repository into/seams-swim/swim/src,replacing all files that were previously there.
```
   > cp -R <clonedrepositoryfolder>/swim/src ~/seams-swim/swim/src
```
3) Run the make command in the src folder.
```
   > make
```
4) Copy the MySwimsa.ini from the cloned repository
```
   > cp "cloned_repo_URL"/swim/simulations/Myswim_sa.ini ~/seams-swim/swim/simulations/swim_sa
```
5) Now run the following commands to run the simulation with the adaptation manager as a module
```
   > cd ~/seams-swim/swim/simulations/swim_sa/
   > ./run.sh Reactive3 1 My_Swim_sa.ini
```
The arguments for the run command are as follows:
```
./run.sh config [run-number(s)|all [ini-file]]}
```
The config argument is a named configuration defined in the ini file.
The optional argument to select which run to execute can include a list of comma-separated run numbers without spaces (e.g., `1,3,4`), or a range or run numbers (e.g., `0-4`).
The optional third argument can be used to specify a different ini file (the default is `swim_sa.ini`).
For details about how configurations and runs are defined see the [OMNeT++ manual](https://omnetpp.org/doc/omnetpp/manual). With the default ini file, run 1 uses the WorldCup trace with a server boot delay of 60 seconds.  
6) To view the graph output 
```
   > cd ~/seams-swim/results/
   > ../swim/tools/plotResults.sh MY_SWIM_SA Reactive3 1 plot.pdf
```
If the previous plot was closed, it can be reopened with `gnome-open plot.pdf`.

## Output
You can find the graph plot generated by ReactiveAdaptaitonManager3 [here](https://docs.google.com/document/d/1fs0i5SxjAYYBNCshaqCODZnwDS-IOXLROMRfxiKfN_k/edit?usp=sharing)

## Contributors
1) Pai Airody Mohandas
2) Olugbo Olufemi Oniyide
3) Damilola Gbadamosi
4) Samuel Abiodun Oyedele
5) Amarnath Prajwal Bengaluru
